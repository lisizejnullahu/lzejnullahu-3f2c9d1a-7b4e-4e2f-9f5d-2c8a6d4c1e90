<div class="min-h-screen bg-gray-50 dark:bg-slate-900">
  <!-- Header -->
  <header
    class="bg-white dark:bg-slate-800 shadow-md border-b border-gray-200 dark:border-slate-700 py-3 sm:py-4 lg:py-6 mb-4 sm:mb-6 lg:mb-8 sticky top-0 z-40"
  >
    <div class="max-w-7xl mx-auto px-3 sm:px-4 lg:px-6">
      <div
        class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 sm:gap-4"
      >
        <h1
          class="text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white tracking-tight"
        >
          üìã Task Management
        </h1>
        <div class="flex items-center gap-2 sm:gap-3 flex-wrap">
          <button
            (click)="toggleTheme()"
            [attr.aria-label]="
              isDarkMode ? 'Switch to light mode' : 'Switch to dark mode'
            "
            class="min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center text-xl bg-gray-100 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-full hover:bg-indigo-600 hover:border-indigo-600 hover:text-white active:scale-95 transition-all shadow-sm hover:shadow-md touch-manipulation"
          >
            <span *ngIf="!isDarkMode">üåô</span>
            <span *ngIf="isDarkMode">‚òÄÔ∏è</span>
          </button>
          <button
            (click)="toggleShortcutsHelp()"
            title="Keyboard shortcuts"
            class="min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center text-xl bg-gray-100 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-full hover:bg-indigo-600 hover:border-indigo-600 hover:text-white active:scale-95 transition-all shadow-sm hover:shadow-md touch-manipulation"
          >
            ‚å®Ô∏è
          </button>
          <span
            class="hidden sm:inline-block text-xs lg:text-sm font-medium text-gray-700 dark:text-gray-300 px-2"
            >{{ currentUser?.name
            }}<span class="hidden md:inline">
              ({{ currentUser?.role }})</span
            ></span
          >
          <button
            (click)="logout()"
            class="min-h-[44px] px-4 py-2 text-sm bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-slate-600 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-slate-600 active:scale-95 transition-all touch-manipulation"
          >
            Logout
          </button>
        </div>
      </div>
    </div>
  </header>

  <div class="max-w-7xl mx-auto px-3 sm:px-4 lg:px-6">
    <!-- Toolbar -->
    <div
      class="flex flex-col sm:flex-row sm:justify-between sm:items-start lg:items-center mb-4 sm:mb-6 gap-3"
    >
      <div class="grid grid-cols-2 sm:flex gap-2 sm:gap-3 w-full sm:w-auto">
        <select
          [(ngModel)]="filterStatus"
          (change)="applyFilters()"
          class="min-h-[44px] px-3 sm:px-4 py-2 text-sm border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition touch-manipulation"
        >
          <option value="">All Status</option>
          <option [value]="TaskStatus.TODO">To Do</option>
          <option [value]="TaskStatus.IN_PROGRESS">In Progress</option>
          <option [value]="TaskStatus.DONE">Done</option>
        </select>

        <select
          [(ngModel)]="filterCategory"
          (change)="applyFilters()"
          class="min-h-[44px] px-3 sm:px-4 py-2 text-sm border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition touch-manipulation"
        >
          <option value="">All Categories</option>
          <option [value]="TaskCategory.WORK">Work</option>
          <option [value]="TaskCategory.PERSONAL">Personal</option>
          <option [value]="TaskCategory.URGENT">Urgent</option>
          <option [value]="TaskCategory.LOW_PRIORITY">Low Priority</option>
        </select>

        <select
          [(ngModel)]="sortBy"
          (change)="applyFilters()"
          class="min-h-[44px] col-span-2 sm:col-span-1 px-3 sm:px-4 py-2 text-sm border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition touch-manipulation"
        >
          <option value="order">Order</option>
          <option value="dueDate">Due Date</option>
          <option value="createdAt">Created Date</option>
        </select>
      </div>

      <button
        *ngIf="canModify()"
        (click)="openCreateModal()"
        class="min-h-[44px] w-full sm:w-auto px-6 py-2.5 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 text-white font-medium rounded-lg shadow-md hover:shadow-lg active:scale-95 transition-all touch-manipulation whitespace-nowrap"
      >
        ‚ú® New Task
      </button>
    </div>

    <!-- Mobile Tab Navigation -->
    <div
      class="flex lg:hidden gap-2 mb-4 sm:mb-6 overflow-x-auto pb-2 -mx-3 px-3 sm:mx-0 sm:px-0"
    >
      <button
        [class.bg-indigo-600]="activeTab === 'TODO'"
        [class.text-white]="activeTab === 'TODO'"
        [class.bg-gray-200]="activeTab !== 'TODO'"
        [class.text-gray-700]="activeTab !== 'TODO'"
        [class.dark:bg-indigo-600]="activeTab === 'TODO'"
        [class.dark:bg-slate-700]="activeTab !== 'TODO'"
        [class.dark:text-gray-300]="activeTab !== 'TODO'"
        (click)="setActiveTab('TODO')"
        class="min-h-[44px] flex-1 min-w-[100px] px-2 sm:px-4 py-2.5 rounded-lg text-xs sm:text-sm font-medium transition-all whitespace-nowrap touch-manipulation"
      >
        üìù To Do ({{ todoTasks.length }})
      </button>
      <button
        [class.bg-indigo-600]="activeTab === 'IN_PROGRESS'"
        [class.text-white]="activeTab === 'IN_PROGRESS'"
        [class.bg-gray-200]="activeTab !== 'IN_PROGRESS'"
        [class.text-gray-700]="activeTab !== 'IN_PROGRESS'"
        [class.dark:bg-indigo-600]="activeTab === 'IN_PROGRESS'"
        [class.dark:bg-slate-700]="activeTab !== 'IN_PROGRESS'"
        [class.dark:text-gray-300]="activeTab !== 'IN_PROGRESS'"
        (click)="setActiveTab('IN_PROGRESS')"
        class="min-h-[44px] flex-1 min-w-[100px] px-2 sm:px-4 py-2.5 rounded-lg text-xs sm:text-sm font-medium transition-all whitespace-nowrap touch-manipulation"
      >
        ‚ö° In Progress ({{ inProgressTasks.length }})
      </button>
      <button
        [class.bg-indigo-600]="activeTab === 'DONE'"
        [class.text-white]="activeTab === 'DONE'"
        [class.bg-gray-200]="activeTab !== 'DONE'"
        [class.text-gray-700]="activeTab !== 'DONE'"
        [class.dark:bg-indigo-600]="activeTab === 'DONE'"
        [class.dark:bg-slate-700]="activeTab !== 'DONE'"
        [class.dark:text-gray-300]="activeTab !== 'DONE'"
        (click)="setActiveTab('DONE')"
        class="min-h-[44px] flex-1 min-w-[100px] px-2 sm:px-4 py-2.5 rounded-lg text-xs sm:text-sm font-medium transition-all whitespace-nowrap touch-manipulation"
      >
        ‚úÖ Done ({{ doneTasks.length }})
      </button>
    </div>

    <!-- Kanban Board -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 pb-6">
      <!-- TODO Column -->
      <div [class.hidden]="activeTab !== 'TODO'" class="lg:block">
        <h2
          class="hidden lg:block text-xl font-bold text-gray-800 dark:text-white mb-4"
        >
          üìù To Do ({{ todoTasks.length }})
        </h2>
        <div
          cdkDropList
          #todoList="cdkDropList"
          [cdkDropListData]="todoTasks"
          [cdkDropListConnectedTo]="[inProgressList, doneList]"
          (cdkDropListDropped)="drop($event, TaskStatus.TODO)"
          class="min-h-[400px] sm:min-h-[500px] lg:min-h-[600px] p-3 sm:p-4 bg-gray-100 dark:bg-slate-800 rounded-xl"
        >
          <div
            *ngFor="let task of todoTasks"
            cdkDrag
            class="mb-3 p-4 sm:p-5 bg-white dark:bg-slate-700 rounded-xl shadow-sm border border-gray-200 dark:border-slate-600 hover:shadow-md transition-all cursor-move active:shadow-lg"
          >
            <div class="flex justify-between items-start mb-3">
              <h3
                class="text-base sm:text-lg font-semibold text-gray-900 dark:text-white flex-1 pr-2 break-words"
              >
                {{ task.title }}
              </h3>
              <div class="flex gap-1 flex-shrink-0" *ngIf="canModify()">
                <button
                  (click)="openEditModal(task)"
                  class="min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg active:scale-95 transition-all touch-manipulation text-lg"
                >
                  ‚úèÔ∏è
                </button>
                <button
                  (click)="deleteTask(task)"
                  class="min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center hover:bg-red-100 dark:hover:bg-red-900 rounded-lg active:scale-95 transition-all touch-manipulation text-lg"
                >
                  üóëÔ∏è
                </button>
              </div>
            </div>

            <p
              *ngIf="task.description"
              class="text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-3 break-words line-clamp-3"
            >
              {{ task.description }}
            </p>

            <div class="flex items-center flex-wrap gap-2 mb-2">
              <span
                [class.bg-blue-100]="task.category === TaskCategory.WORK"
                [class.text-blue-700]="task.category === TaskCategory.WORK"
                [class.dark:bg-blue-900]="task.category === TaskCategory.WORK"
                [class.dark:text-blue-300]="task.category === TaskCategory.WORK"
                [class.bg-purple-100]="task.category === TaskCategory.PERSONAL"
                [class.text-purple-700]="
                  task.category === TaskCategory.PERSONAL
                "
                [class.dark:bg-purple-900]="
                  task.category === TaskCategory.PERSONAL
                "
                [class.dark:text-purple-300]="
                  task.category === TaskCategory.PERSONAL
                "
                [class.bg-red-100]="task.category === TaskCategory.URGENT"
                [class.text-red-700]="task.category === TaskCategory.URGENT"
                [class.dark:bg-red-900]="task.category === TaskCategory.URGENT"
                [class.dark:text-red-300]="
                  task.category === TaskCategory.URGENT
                "
                [class.bg-green-100]="
                  task.category === TaskCategory.LOW_PRIORITY
                "
                [class.text-green-700]="
                  task.category === TaskCategory.LOW_PRIORITY
                "
                [class.dark:bg-green-900]="
                  task.category === TaskCategory.LOW_PRIORITY
                "
                [class.dark:text-green-300]="
                  task.category === TaskCategory.LOW_PRIORITY
                "
                class="inline-block px-2.5 py-1 rounded-full text-xs sm:text-sm font-medium"
              >
                {{ task.category }}
              </span>
            </div>

            <div
              *ngIf="task.dueDate"
              class="text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2"
            >
              üìÖ Due: {{ task.dueDate | date : 'short' }}
            </div>
          </div>

          <div
            *ngIf="todoTasks.length === 0"
            class="text-center py-12 text-gray-400 dark:text-gray-500"
          >
            No tasks
          </div>
        </div>
      </div>

      <!-- IN PROGRESS Column -->
      <div [class.hidden]="activeTab !== 'IN_PROGRESS'" class="lg:block">
        <h2
          class="hidden lg:block text-xl font-bold text-gray-800 dark:text-white mb-4"
        >
          ‚ö° In Progress ({{ inProgressTasks.length }})
        </h2>
        <div
          cdkDropList
          #inProgressList="cdkDropList"
          [cdkDropListData]="inProgressTasks"
          [cdkDropListConnectedTo]="[todoList, doneList]"
          (cdkDropListDropped)="drop($event, TaskStatus.IN_PROGRESS)"
          class="min-h-[400px] sm:min-h-[500px] lg:min-h-[600px] p-3 sm:p-4 bg-gray-100 dark:bg-slate-800 rounded-xl"
        >
          <div
            *ngFor="let task of inProgressTasks"
            cdkDrag
            class="mb-3 p-4 sm:p-5 bg-white dark:bg-slate-700 rounded-xl shadow-sm border border-gray-200 dark:border-slate-600 hover:shadow-md transition-all cursor-move active:shadow-lg"
          >
            <div class="flex justify-between items-start mb-3">
              <h3
                class="text-base sm:text-lg font-semibold text-gray-900 dark:text-white flex-1 pr-2 break-words"
              >
                {{ task.title }}
              </h3>
              <div class="flex gap-1 flex-shrink-0" *ngIf="canModify()">
                <button
                  (click)="openEditModal(task)"
                  class="min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg active:scale-95 transition-all touch-manipulation text-lg"
                >
                  ‚úèÔ∏è
                </button>
                <button
                  (click)="deleteTask(task)"
                  class="min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center hover:bg-red-100 dark:hover:bg-red-900 rounded-lg active:scale-95 transition-all touch-manipulation text-lg"
                >
                  üóëÔ∏è
                </button>
              </div>
            </div>

            <p
              *ngIf="task.description"
              class="text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-3 break-words line-clamp-3"
            >
              {{ task.description }}
            </p>

            <div class="flex items-center flex-wrap gap-2 mb-2">
              <span
                [class.bg-blue-100]="task.category === TaskCategory.WORK"
                [class.text-blue-700]="task.category === TaskCategory.WORK"
                [class.dark:bg-blue-900]="task.category === TaskCategory.WORK"
                [class.dark:text-blue-300]="task.category === TaskCategory.WORK"
                [class.bg-purple-100]="task.category === TaskCategory.PERSONAL"
                [class.text-purple-700]="
                  task.category === TaskCategory.PERSONAL
                "
                [class.dark:bg-purple-900]="
                  task.category === TaskCategory.PERSONAL
                "
                [class.dark:text-purple-300]="
                  task.category === TaskCategory.PERSONAL
                "
                [class.bg-red-100]="task.category === TaskCategory.URGENT"
                [class.text-red-700]="task.category === TaskCategory.URGENT"
                [class.dark:bg-red-900]="task.category === TaskCategory.URGENT"
                [class.dark:text-red-300]="
                  task.category === TaskCategory.URGENT
                "
                [class.bg-green-100]="
                  task.category === TaskCategory.LOW_PRIORITY
                "
                [class.text-green-700]="
                  task.category === TaskCategory.LOW_PRIORITY
                "
                [class.dark:bg-green-900]="
                  task.category === TaskCategory.LOW_PRIORITY
                "
                [class.dark:text-green-300]="
                  task.category === TaskCategory.LOW_PRIORITY
                "
                class="inline-block px-2.5 py-1 rounded-full text-xs sm:text-sm font-medium"
              >
                {{ task.category }}
              </span>
            </div>

            <div
              *ngIf="task.dueDate"
              class="text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2"
            >
              üìÖ Due: {{ task.dueDate | date : 'short' }}
            </div>
          </div>

          <div
            *ngIf="inProgressTasks.length === 0"
            class="text-center py-12 text-gray-400 dark:text-gray-500"
          >
            No tasks
          </div>
        </div>
      </div>

      <!-- DONE Column -->
      <div [class.hidden]="activeTab !== 'DONE'" class="lg:block">
        <h2
          class="hidden lg:block text-xl font-bold text-gray-800 dark:text-white mb-4"
        >
          ‚úÖ Done ({{ doneTasks.length }})
        </h2>
        <div
          cdkDropList
          #doneList="cdkDropList"
          [cdkDropListData]="doneTasks"
          [cdkDropListConnectedTo]="[todoList, inProgressList]"
          (cdkDropListDropped)="drop($event, TaskStatus.DONE)"
          class="min-h-[400px] sm:min-h-[500px] lg:min-h-[600px] p-3 sm:p-4 bg-gray-100 dark:bg-slate-800 rounded-xl"
        >
          <div
            *ngFor="let task of doneTasks"
            cdkDrag
            class="mb-3 p-4 sm:p-5 bg-white dark:bg-slate-700 rounded-xl shadow-sm border border-gray-200 dark:border-slate-600 hover:shadow-md transition-all cursor-move active:shadow-lg"
          >
            <div class="flex justify-between items-start mb-3">
              <h3
                class="text-base sm:text-lg font-semibold text-gray-900 dark:text-white flex-1 pr-2 break-words"
              >
                {{ task.title }}
              </h3>
              <div class="flex gap-1 flex-shrink-0" *ngIf="canModify()">
                <button
                  (click)="openEditModal(task)"
                  class="min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center hover:bg-gray-100 dark:hover:bg-slate-600 rounded-lg active:scale-95 transition-all touch-manipulation text-lg"
                >
                  ‚úèÔ∏è
                </button>
                <button
                  (click)="deleteTask(task)"
                  class="min-w-[44px] min-h-[44px] w-11 h-11 flex items-center justify-center hover:bg-red-100 dark:hover:bg-red-900 rounded-lg active:scale-95 transition-all touch-manipulation text-lg"
                >
                  üóëÔ∏è
                </button>
              </div>
            </div>

            <p
              *ngIf="task.description"
              class="text-sm sm:text-base text-gray-600 dark:text-gray-400 mb-3 break-words line-clamp-3"
            >
              {{ task.description }}
            </p>

            <div class="flex items-center flex-wrap gap-2 mb-2">
              <span
                [class.bg-blue-100]="task.category === TaskCategory.WORK"
                [class.text-blue-700]="task.category === TaskCategory.WORK"
                [class.dark:bg-blue-900]="task.category === TaskCategory.WORK"
                [class.dark:text-blue-300]="task.category === TaskCategory.WORK"
                [class.bg-purple-100]="task.category === TaskCategory.PERSONAL"
                [class.text-purple-700]="
                  task.category === TaskCategory.PERSONAL
                "
                [class.dark:bg-purple-900]="
                  task.category === TaskCategory.PERSONAL
                "
                [class.dark:text-purple-300]="
                  task.category === TaskCategory.PERSONAL
                "
                [class.bg-red-100]="task.category === TaskCategory.URGENT"
                [class.text-red-700]="task.category === TaskCategory.URGENT"
                [class.dark:bg-red-900]="task.category === TaskCategory.URGENT"
                [class.dark:text-red-300]="
                  task.category === TaskCategory.URGENT
                "
                [class.bg-green-100]="
                  task.category === TaskCategory.LOW_PRIORITY
                "
                [class.text-green-700]="
                  task.category === TaskCategory.LOW_PRIORITY
                "
                [class.dark:bg-green-900]="
                  task.category === TaskCategory.LOW_PRIORITY
                "
                [class.dark:text-green-300]="
                  task.category === TaskCategory.LOW_PRIORITY
                "
                class="inline-block px-2.5 py-1 rounded-full text-xs sm:text-sm font-medium"
              >
                {{ task.category }}
              </span>
            </div>

            <div
              *ngIf="task.dueDate"
              class="text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2"
            >
              üìÖ Due: {{ task.dueDate | date : 'short' }}
            </div>
          </div>

          <div
            *ngIf="doneTasks.length === 0"
            class="text-center py-12 text-gray-400 dark:text-gray-500"
          >
            No tasks
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Task Modal -->
<div
  *ngIf="showTaskModal"
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3 sm:p-4 overflow-y-auto"
  (click)="closeModal()"
>
  <div
    class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-lg w-full p-5 sm:p-6 my-4"
    (click)="$event.stopPropagation()"
  >
    <h2
      class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-5 sm:mb-6"
    >
      {{ editingTask ? '‚úèÔ∏è Edit Task' : '‚ú® New Task' }}
    </h2>

    <form (ngSubmit)="saveTask()">
      <div class="mb-4 sm:mb-5">
        <label
          class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"
          >Title</label
        >
        <input
          [(ngModel)]="taskForm.title"
          name="title"
          required
          class="w-full min-h-[44px] px-3 sm:px-4 py-2.5 sm:py-3 text-base border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-gray-900 dark:text-white transition touch-manipulation"
        />
      </div>

      <div class="mb-4 sm:mb-5">
        <label
          class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"
          >Description</label
        >
        <textarea
          [(ngModel)]="taskForm.description"
          name="description"
          rows="3"
          class="w-full px-3 sm:px-4 py-2.5 sm:py-3 text-base border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-gray-900 dark:text-white transition touch-manipulation resize-y"
        ></textarea>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4 sm:mb-5">
        <div>
          <label
            class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"
            >Status</label
          >
          <select
            [(ngModel)]="taskForm.status"
            name="status"
            class="w-full min-h-[44px] px-3 sm:px-4 py-2.5 sm:py-3 text-base border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-gray-900 dark:text-white transition touch-manipulation"
          >
            <option [value]="TaskStatus.TODO">To Do</option>
            <option [value]="TaskStatus.IN_PROGRESS">In Progress</option>
            <option [value]="TaskStatus.DONE">Done</option>
          </select>
        </div>

        <div>
          <label
            class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"
            >Category</label
          >
          <select
            [(ngModel)]="taskForm.category"
            name="category"
            class="w-full min-h-[44px] px-3 sm:px-4 py-2.5 sm:py-3 text-base border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-gray-900 dark:text-white transition touch-manipulation"
          >
            <option [value]="TaskCategory.WORK">Work</option>
            <option [value]="TaskCategory.PERSONAL">Personal</option>
            <option [value]="TaskCategory.URGENT">Urgent</option>
            <option [value]="TaskCategory.LOW_PRIORITY">Low Priority</option>
          </select>
        </div>
      </div>

      <div class="mb-5 sm:mb-6">
        <label
          class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"
          >Due Date</label
        >
        <input
          type="date"
          [(ngModel)]="taskForm.dueDate"
          name="dueDate"
          class="w-full min-h-[44px] px-3 sm:px-4 py-2.5 sm:py-3 text-base border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-slate-700 text-gray-900 dark:text-white transition touch-manipulation"
        />
      </div>

      <div class="flex flex-col-reverse sm:flex-row gap-3 sm:justify-end">
        <button
          type="button"
          (click)="closeModal()"
          class="min-h-[44px] w-full sm:w-auto px-5 py-2.5 bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-slate-600 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-slate-600 active:scale-95 transition-all touch-manipulation"
        >
          Cancel
        </button>
        <button
          type="submit"
          class="min-h-[44px] w-full sm:w-auto px-5 py-2.5 bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 text-white font-medium rounded-lg shadow-md hover:shadow-lg active:scale-95 transition-all touch-manipulation"
        >
          üíæ Save
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Keyboard Shortcuts Modal -->
<div
  *ngIf="showShortcutsHelp"
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3 sm:p-4 overflow-y-auto"
  (click)="toggleShortcutsHelp()"
>
  <div
    class="bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-2xl w-full p-5 sm:p-6 my-4"
    (click)="$event.stopPropagation()"
  >
    <h2
      class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mb-5 sm:mb-6"
    >
      ‚å®Ô∏è Keyboard Shortcuts
    </h2>

    <div class="space-y-3 sm:space-y-4 mb-5 sm:mb-6">
      <div
        class="flex items-center gap-4 p-3 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600"
      >
        <div class="flex gap-2">
          <kbd
            class="px-3 py-1.5 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-slate-600 border border-gray-300 dark:border-slate-500 rounded shadow-sm"
            >Cmd/Ctrl</kbd
          >
          <span class="text-gray-600 dark:text-gray-400">+</span>
          <kbd
            class="px-3 py-1.5 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-slate-600 border border-gray-300 dark:border-slate-500 rounded shadow-sm"
            >K</kbd
          >
        </div>
        <span class="flex-1 text-gray-600 dark:text-gray-400"
          >Create new task</span
        >
      </div>

      <div
        class="flex items-center gap-4 p-3 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600"
      >
        <div class="flex gap-2">
          <kbd
            class="px-3 py-1.5 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-slate-600 border border-gray-300 dark:border-slate-500 rounded shadow-sm"
            >Cmd/Ctrl</kbd
          >
          <span class="text-gray-600 dark:text-gray-400">+</span>
          <kbd
            class="px-3 py-1.5 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-slate-600 border border-gray-300 dark:border-slate-500 rounded shadow-sm"
            >R</kbd
          >
        </div>
        <span class="flex-1 text-gray-600 dark:text-gray-400"
          >Reload tasks</span
        >
      </div>

      <div
        class="flex items-center gap-4 p-3 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600"
      >
        <div class="flex gap-2">
          <kbd
            class="px-3 py-1.5 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-slate-600 border border-gray-300 dark:border-slate-500 rounded shadow-sm"
            >Cmd/Ctrl</kbd
          >
          <span class="text-gray-600 dark:text-gray-400">+</span>
          <kbd
            class="px-3 py-1.5 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-slate-600 border border-gray-300 dark:border-slate-500 rounded shadow-sm"
            >D</kbd
          >
        </div>
        <span class="flex-1 text-gray-600 dark:text-gray-400"
          >Toggle dark mode</span
        >
      </div>

      <div
        class="flex items-center gap-4 p-3 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600"
      >
        <div class="flex gap-2">
          <kbd
            class="px-3 py-1.5 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-slate-600 border border-gray-300 dark:border-slate-500 rounded shadow-sm"
            >Cmd/Ctrl</kbd
          >
          <span class="text-gray-600 dark:text-gray-400">+</span>
          <kbd
            class="px-3 py-1.5 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-slate-600 border border-gray-300 dark:border-slate-500 rounded shadow-sm"
            >/</kbd
          >
        </div>
        <span class="flex-1 text-gray-600 dark:text-gray-400"
          >Show/hide shortcuts</span
        >
      </div>

      <div
        class="flex items-center gap-4 p-3 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600"
      >
        <kbd
          class="px-3 py-1.5 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-slate-600 border border-gray-300 dark:border-slate-500 rounded shadow-sm"
          >Esc</kbd
        >
        <span class="flex-1 text-gray-600 dark:text-gray-400">Close modal</span>
      </div>

      <div
        class="flex items-center gap-4 p-3 bg-gray-50 dark:bg-slate-700 rounded-lg border border-gray-200 dark:border-slate-600"
      >
        <div class="flex gap-2">
          <kbd
            class="px-3 py-1.5 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-slate-600 border border-gray-300 dark:border-slate-500 rounded shadow-sm"
            >1</kbd
          >
          <span class="text-gray-600 dark:text-gray-400">/</span>
          <kbd
            class="px-3 py-1.5 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-slate-600 border border-gray-300 dark:border-slate-500 rounded shadow-sm"
            >2</kbd
          >
          <span class="text-gray-600 dark:text-gray-400">/</span>
          <kbd
            class="px-3 py-1.5 text-sm font-semibold text-gray-800 dark:text-gray-200 bg-white dark:bg-slate-600 border border-gray-300 dark:border-slate-500 rounded shadow-sm"
            >3</kbd
          >
        </div>
        <span class="flex-1 text-gray-600 dark:text-gray-400"
          >Switch between tabs</span
        >
      </div>
    </div>

    <div class="flex justify-end">
      <button
        (click)="toggleShortcutsHelp()"
        class="min-h-[44px] w-full sm:w-auto px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 text-white font-medium rounded-lg shadow-md hover:shadow-lg active:scale-95 transition-all touch-manipulation"
      >
        Got it!
      </button>
    </div>
  </div>
</div>
